<html lang="en">
  <head>
    <title>Test ARIA</title>
    <style>
      /* for browsers that don't support hidden attribute */
      [hidden] {
        display: none;
      }
      
      /* make demo content easier to see */
      body, input, button {
        font-family: arial, sans-serif;
        font-size: 1em;
      }
      
      label {
        font-weight: bold;
      }
    </style>
  </head>
  
  <body>
    <div id="page">
    <h1>Test ARIA</h1>
      
    <hr>
    <!-- more details at 
    https://webaim.org/techniques/keyboard/tabindex
    -->
    <h2>Tabindex</h2>
    <a href="#heading">Jump to heading</a>
    <h3 id="heading" tabindex="-1">Heading with tabindex -1</h3>
    <h3 tabindex="0">Heading with tabindex 0</h3>

    <hr>
    <!-- adapted from
    https://www.w3.org/WAI/tutorials/forms/
    -->
    <h2>Keyboard support</h2>
      
    <form>
      <p>
        <label for="emailaddr">Email:</label>
        <input type="text" name="emailaddr" id="emailaddr" autocomplete="email">
      </p>

      <p>
        <input type="checkbox" name="subscribe" id="subscribe">
        <label for="subscribe">Subscribe to newsletter</label>
      </p>
      
      <p>
        <fieldset>
        <legend>Newsletter format</legend>
          <div>
            <input type="radio" name="format" id="txt" value="txt" checked>
            <label for="txt">Plain text</label>
          </div>
          <div>
            <input type="radio" name="format" id="web" value="web">
            <label for="web">Web page</label>
          </div>
        </fieldset>
      </p>
      
      <p>
        <fieldset>
        <legend>I want to receive</legend>
          <input type="checkbox" name="newsletter" id="check_1"> <label for="check_1">The weekly newsletter</label><br>
          <input type="checkbox" name="company_offers" id="check_2"> <label for="check_2">Offers from the company</label><br>
          <input type="checkbox" name="assoc_offers" id="check_3"> <label for="check_3">Offers from associated companies</label>
        </fieldset>
      </p>
      
      <p>
        <label for="frequency">Frequency</label><br>
        <select id="frequency">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>
      </p>
      
      <input type="submit" value="Subscribe">
    </form>
      
    <hr>
    <!-- adapted from
    https://inclusive-components.design/cards/ and
    https://www.canadapost.ca/cpc/en/tools.page
    Very few modifications - minor simplification of design, content, CSS and HTML.
    -->
    <style>
      /* cards */
      ul.cards {
        list-style: none;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(15rem, 1fr));
        grid-column-gap: 1.5rem;
        grid-row-gap: 1.5rem;
      }

      .cards li {
        border: 1px solid #999;
        display: flex;
        flex-direction: column;
        position: relative;
        padding: 1rem 1rem 0;
      }
      
      .cards li:hover,
      .cards li:focus-within {
        box-shadow: 0 0 0.25rem #CA261A;
      }

      a.button::after {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
      }

      a.button:hover, 
      a.button:focus {
        background: #CA261A;
      }

      .button {
        color: #fff;
        text-decoration: none;
        background-color: #0467C6;
        display: block;
        margin: 1rem 0 0 0;
        padding: 1rem;
        text-align: center;
      }

      .secondary {
        color: #0467C6;
        display: block;
        text-align: center;
        margin: 1rem 0 0;
        position: relative; /* raise the link about the a:after pseudo-content */
      }
    </style>
    <h2>Cards</h2>

    <ul class="cards">
      <li>
        <img src="https://canadapost.ca/cpc/assets/cpc/uploads/icons/mail-forwarding.svg" width="50" height="50" alt="">
        <h3 id="mail-forwarding">Mail Forwarding</h3>
        <p>Ensure all your important mail reaches you at your new address.<br>
          <a class="button" aria-describedby="mail-forwarding" href="https://sso.epost.ca/sso/lfe/ui/login?stepupId=smb_mode1,consumer,commercial_link,smb_link&templateId=cpcapps&manifestId=cpgSecurity&sourceUrl=https%3A%2F%2Fstg12.canadapost.ca%2Fweb%2Ffr%2Fpages%2Fepost%2Fdefault.page&targetUrl=https%3A//www.canadapost.ca/rso/en/mailforward&authlvl=&language=en">Use tool now</a>
          <a class="secondary" aria-describedby="mail-forwarding" href="https://www.canadapost.ca/cpc/en/personal/receiving/manage-mail/mail-forwarding.page?">Learn more</a>
        </p>
      </li>              
      <li>
        <img src="https://canadapost.ca/cpc/assets/cpc/uploads/icons/hold-mail.svg" width="50" height="50" alt="">
        <h3 id="hold-mail">Hold Mail</h3>
        <p>Keep your mail safe and secure when you're not there to receive it.<br>
          <a class="button" aria-describedby="hold-mail" href="https://canadapost.ca/rso/en/holdmail">Use tool now</a>
          <a class="secondary" aria-describedby="hold-mail" href="https://canadapost.ca/cpc/en/personal/receiving/manage-mail/hold-mail.page?" id="">Learn more</a>
        </p>
      </li>
      <li>
        <img src="https://canadapost.ca/cpc/assets/cpc/uploads/icons/flexdelivery.svg" width="50" height="50" alt="">
        <h3 id="flexdelivery">FlexDelivery</h3>
        <p>Have your online purchases delivered to any convenient post office.<br>
          <a class="button" aria-describedby="flexdelivery" href="https://www.epost.ca/dtpo/core/managePo.a?language=en&OWASP_CSRFTOKEN=">Use tool now</a>
          <a class="secondary" aria-describedby="flexdelivery" href="https://canadapost.ca/cpc/en/personal/receiving/alternative-delivery/flexdelivery.page?">Learn more</a>
        </p>
      </li>
    </ul> 

    <hr>
    <!-- adapted from
    https://codepen.io/marcysutton/pen/JoQqVw and
    https://knowbility.org/blog/2020/accessible-slide-menus/
    Modified to use JavaScript only, no jQuery and to simplify the code. I toggle aria-hidden on the container nav and change tabindex from -1 to 0 on links instead of toggling a hidden attribute because hidden elements can't use CSS transitions.
    -->
    <style>
      /* sliding nav menu */
      #quick-button {
        display: block;
        margin: 0.5rem 0 auto auto;
        position: relative;
      }
      
      #quick-links {
        background-color: #ebebeb;
        bottom: 0;
        max-width: 220px;
        overflow: auto;
        position: fixed;
        top: 0;
        right: -220px;
        width: 100%;
        z-index: 0;
        transition: all 300ms;
        -moz-transition: all 300ms;
        -o-transition: all 300ms;
        -webkit-transition: all 300ms;
      }
      
      #quick-links[aria-hidden="false"] {
        transform: translateX(-220px);
        -moz-transform: translateX(-220px);
        -ms-transform: translateX(-220px);
        -webkit-transform: translateX(-220px);
      }
    </style>
     
    <nav id="quick-links" aria-label="Quick links" aria-hidden="true">
      <ul>
        <li><a href="#" tabindex="-1">Blog</a></li>
        <li><a href="#" tabindex="-1">About</a></li>
        <li><a href="#" tabindex="-1">Contact</a></li>
      </ul>
    </nav>

    <h2>Sliding sidebar navigation</h2>
    <button type="button" id="quick-button" aria-expanded="false">
      Quick links
    </button>
     
    <script>
      
      var quickNav    = document.getElementById("quick-links"),
          quickButton = document.getElementById("quick-button"),
          quickLinks  = quickNav.querySelectorAll("a");
    
      // slide menu in or out on quick links button click
      quickButton.addEventListener("click", slideMenu);
      
      function slideMenu() {
        if (quickNav.getAttribute("aria-hidden") === "true") {
          showMenu();
        } else {
          hideMenu();
        }
      }

      function showMenu() {
        quickNav.setAttribute("aria-hidden", "false");
        quickButton.setAttribute("aria-expanded", "true");
        
        for (i = 0; i < quickLinks.length; i++) {
          quickLinks[i].removeAttribute("tabindex");
        }
        // move focus to first link in menu
        quickLinks[0].focus();
      }
      
      function hideMenu() {
        quickNav.setAttribute("aria-hidden", "true");
        quickButton.setAttribute("aria-expanded", "false");
        
        for (i = 0; i < quickLinks.length; i++) {
          quickLinks[i].setAttribute("tabindex", "-1");
        }
        // return focus to button used to open menu
        quickButton.focus();
      }
      
      /* There are multiple elements on this page that can be closed with the
      escape key. For simplicity, I've added a listener to each component, 
      but ideally, the escape key should work outside each specific 
      component. This would involve a global page listener that would close 
      any of the open components and reset the focus properly. */
      
      // allow navigation using arrow keys and close with escape key     
      quickNav.addEventListener("keydown", e => {
        
        if (e.keyCode === 38 || e.keyCode === 40) {
          // prevent page scroll on arrow up/down when menu is open
          e.preventDefault();
          
          // get the parent <li> of selected <a>
          var current = document.activeElement.parentElement;
          
          // move to next link on down arrow
          if (e.keyCode === 40) {
            if(current.nextElementSibling) {
              // focus on the child <a> of the next <li>
              current.nextElementSibling.firstChild.focus();
            } else {
              // if no next link, circle back to first link
              quickLinks[0].focus();
            }
          
          // move to previous link on up arrow
          } else if (e.keyCode === 38) {
            if(current.previousElementSibling) {
              // focus on the child <a> of the previous <li>
              current.previousElementSibling.firstChild.focus(); 
            } else {
              // if no previous link, circle around to last link
              quickLinks[quickLinks.length - 1].focus();
            }
          }
        }
        
        // close menu on escape key press
        if (e.keyCode === 27) {
          slideMenu();
        }
        
      });
    </script>
     
    <hr>
    <!-- adapted from 
    https://www.canadapost.ca/cpc/en/personal.page and https://www.smashingmagazine.com/2017/11/building-accessible-menu-systems/
    
    Modified Canada Post code to change top-level link to a button. Reduced the number of links and removed closing x to simplify example. See modal demo for how to create a closing x. Replaced the show/hide function with the hidden attribute and CSS which allowed me to remove tabindex="-1" and the associated toggling.
    -->
    <h2>Dropdown navigation</h2>
      
    <nav aria-label="Product navigation" id="product-nav">
      <ul>
        <li>
          <button type="button" aria-expanded="false" aria-controls="receiving">
            Receiving
          </button>
          
          <ul id="receiving" hidden>
            <li><h3><a role="menuitem" href="https://www.canadapost.ca/cpc/en/personal/receiving.page">Receiving overview</a></h3>
              <ul>
                <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/manage-mail.page">Manage your mail</a>
                  <ul>
                    <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/manage-mail/mail-forwarding.page">Forward your mail</a></li>
                    <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/manage-mail/hold-mail.page">Hold your mail</a></li>
                  </ul>
                </li>
                <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/alternative-delivery.page">Alternative delivery options</a>
                  <ul>
                    <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/alternative-delivery/flexdelivery.page">Deliver purchases to post office (FlexDelivery)</a></li>
                    <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/alternative-delivery/post-office-box.page">Rent a post office box</a></li>
                    <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/alternative-delivery/parcel-lockers.page">Parcel lockers</a></li>
                  </ul>
                </li>
                <li><a href="https://www.canadapost.ca/cpc/en/personal/receiving/moving-house.page">Moving to a new home</a></li>
                <li><a href="https://www.canadapost.ca/trackweb/en">Track a package</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li>
          <button type="button" aria-expanded="false" aria-controls="sending">
            Sending
          </button>
          
          <ul id="sending" hidden>
            <li>
              <h3><a href="https://www.canadapost.ca/cpc/en/personal/sending.page">Sending overview</a></h3>
                <ul>
                  <li><a href="https://www.canadapost.ca/cpc/en/personal/sending/letters-mail.page">Letters and mail</a>
                    <ul>
                      <li><a href="https://www.canadapost.ca/cpc/en/personal/sending/letters-mail/postage-rates.page">Postage rates</a></li>
                      <li><a href="https://www.canadapost.ca/cpc/en/personal/sending/letters-mail/letter-size.page">Letter weight and size</a></li>
                    </ul>
                  </li>
                  <li><a href="https://www.canadapost.ca/cpc/en/personal/sending/parcels.page">Parcels</a>
                    <ul>
                      <li><a href="https://www.canadapost.ca/cpc/en/personal/sending/parcels/ship-online.page">Ship online</a></li>
                      <li><a href="https://www.canadapost.ca/cpc/en/personal/sending/parcels/return-labels.page">Return your purchase</a></li>
                      <li><a href="https://www.canadapost.ca/cpotools/apps/wtz/business/landedCost">Estimate duties and taxes</a></li>
                      <li><a href="https://www.canadapost.ca/cpotools/apps/cdc">Complete customs form</a></li>
                    </ul>
                  </li>
                </ul>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
      
    <script>
      var nav        = document.getElementById("product-nav"),
          navButtons = nav.getElementsByTagName("button"),
          menu       = nav.getElementsByTagName("ul"),
          menuLinks  = nav.getElementsByTagName("a"),
          lastFocus;
      
      for (i = 0; i < navButtons.length; i++) {
        navButtons[i].addEventListener("click", toggleDropdown);
      }
        
      // show/hide the dropdown menu
      function toggleDropdown() {
        
        var expanded = this.getAttribute("aria-expanded") === "true" || false;
        this.setAttribute("aria-expanded", !expanded);
        
        // toggle the hidden attribute on the ul under the menu button
        menu = this.nextElementSibling;
        menu.hidden = !menu.hidden;
        
        // remember button used to open menu
        lastFocus = document.activeElement;
        
        // if menu is open, set focus to first link
        if (this.getAttribute("aria-expanded")) {
          // in the ul under the menu button, get first <a> and set focus
          this.nextElementSibling.getElementsByTagName("a")[0].focus();
        }
        // if menu is closed return focus to button used to open the menu
        else {
          lastFocus.focus();
        }
      }

      /* There are multiple elements on this page that can be closed with the
      escape key. For simplicity, I've added a listener to each component, 
      but ideally, the escape key should work outside each the specific 
      component. This would involve a global page listener that would close 
      any of the open components and reset the focus properly. */
      
      // close all open menus on escape key press
      nav.addEventListener("keydown", function(e) {
        
        if (e.keyCode === 27) {
          for (i = 0; i < navButtons.length; i++) {
            navButtons[i].setAttribute("aria-expanded", "false");
            navButtons[i].nextElementSibling.hidden = "true";
          }

          // return focus to last button used to open a menu
          if (lastFocus) {
            lastFocus.focus();
          }
        }

      });
        
    </script>
      
    <hr>
    <!-- adapted from 
    https://www.w3.org/TR/wai-aria-practices/examples/accordion/accordion.html 
    
    Note that aria-expanded is on the accordion heading/button, 
    not the content panel. Putting it on the panel is a common error. 
    -->
    <h2>Accordion</h2>
    
    <div class="accordion">
      <h3>
        <button type="button" aria-expanded="false" aria-controls="fruit">
          Fruit
        </button>
      </h3>
      <div id="fruit" style="display: none">
        <ul>
          <li>Blueberries</li>
          <li>Strawberries</li>
          <li>Bananas</li>
        </ul>
      </div>

      <h3>
        <button type="button" aria-expanded="false" aria-controls="veg">
          Vegetables
        </button>
      </h3>
      
      <div id="veg" style="display: none">
        <ul>
          <li>Carrots</li>
          <li>Zucchini</li>
          <li>Potatoes</li>
        </ul>
      </div>
    </div>

    <script>
      var accordion = document.querySelectorAll(".accordion button");
      
      for (i = 0; i < accordion.length; i++) {
        accordion[i].addEventListener("click", showContent);
      }
      
      function showContent() {
        var target = event.target;
        
        // check if the clicked accordion button is expanded
        var isExpanded = target.getAttribute("aria-expanded") == "true";

        // show the accordion content
        if (!isExpanded) {
          target.setAttribute("aria-expanded", "true");
          target.setAttribute("style", "background: yellow");
          
          document.getElementById(
            target.getAttribute("aria-controls")
          ).style.display = "block";
        }
        
        // hide the accordion content
        else {
          target.setAttribute("aria-expanded", "false");
          target.removeAttribute("style");
          
          document.getElementById(
            target.getAttribute("aria-controls")
          ).style.display = "none";
        }
        
      }  
    </script>
    
    <hr>
    <!-- adapted from 
    https://www.deque.com/blog/a11y-support-series-part-1-aria-tab-panel-accessibility/
    Modified from WAI-ARIA recommendations to allow users to tab between tabs as some keyboard users would expect. In the ARIA specs, you should only be able to navigate by arrow keys. 
    I've also set the focus to the selected tab panel so that a screen reader goes right to selected tab's panel content. 
    Divs aren't normally focusable, but adding tabindex="-1" with JavaScript will move the focus to the panel content. 
    -->
    <h2>Tabs</h2>
 
    <div class="tabs">
      
      <div role="tablist">
        <button type="button" role="tab" aria-selected="true" 
            id="apples-tab" aria-controls="apples-panel" 
            style="background: yellow">
          Apples
        </button>
        <button type="button" role="tab" aria-selected="false" 
            id="bananas-tab" aria-controls="bananas-panel">
          Bananas
        </button>
        <button type="button" role="tab" aria-selected="false" 
            id="peaches-tab" aria-controls="peaches-panel">
          Peaches
        </button>
      </div>
      
      <div id="apples-panel" role="tabpanel" 
           aria-labelledby="apples-tab">
        <h3>Apples</h3>
        <p>Apples are amazing!</p>
        <a href="apple.html">How appealing</a>
      </div>
      <div id="bananas-panel" role="tabpanel" 
           aria-labelledby="bananas-tab" style="display: none">
        <h3>Bananas</h3>
        <p>Don't slip on your banana peel!</p>
        <a href="banana.html">Peel me</a>
      </div>
      <div id="peaches-panel" role="tabpanel" 
           aria-labelledby="peaches-tab" style="display: none">
        <h3>Peaches</h3>
        <p>Peaches keep peaching!</p>
        <a href="peach.html">Get peachy</a>
      </div>
      
    </div><!-- .tabs -->
    
    <script>
      var tabs = document.querySelectorAll("[role=tab]"),
          tabList = document.querySelector("[role=tablist]"),
          tabPanels = document.querySelectorAll("[role=tabpanel]"); 
      
      for (i = 0; i < tabs.length; i++) {
        tabs[i].addEventListener("click", showTabPanel);
      }
      
      function showTabPanel() { 
        var target = event.target;
        
        // close any open tabs and reset tab button
        for (i = 0; i < tabPanels.length; i++) {
            tabPanels[i].style.display = "none";
            tabPanels[i].removeAttribute("tabindex");
        }

        for (i = 0; i < tabs.length; i++) {
          tabs[i].setAttribute("aria-selected", "false");
          tabs[i].setAttribute("style", "background: default");
        }
        
        // find panel to open through the aria-controls of the clicked tab button
        var tabPanelToOpen = document.getElementById(
          target.getAttribute("aria-controls")
        );
        
        // open selected tab and set focus on content so user bypasses other tabs
        tabPanelToOpen.style.display = "block";
        tabPanelToOpen.setAttribute("tabindex", -1);
        tabPanelToOpen.focus();
        
        // highlight open tab button and update aria
        target.setAttribute("aria-selected", "true");
        target.setAttribute("style", "background: yellow");
      }
      
      // add ability to navigate tabs using arrow keys
      tabList.addEventListener("keydown", e => {
        
        if (e.keyCode === 39 || e.keyCode === 37) {
          var selected = document.activeElement;
          
          // move right on right arrow
          if (e.keyCode === 39) {
            if (selected.nextElementSibling) {
              selected.nextElementSibling.click();
              selected.nextElementSibling.focus();
            }
            
          // move left on left arrow
          } else if (e.keyCode === 37) {
            if (selected.previousElementSibling) {
              selected.previousElementSibling.click();
              selected.previousElementSibling.focus();
            }
          }
          
        }
        
      });
    </script>
      
    <hr>
    <!-- adapted from
    https://developer.paciellogroup.com/blog/2016/01/simple-inline-error-message-pattern/
    https://www.w3.org/WAI/tutorials/forms/notifications/
    https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA19
    Notifications should be close enough to the user's focus so someone using magnification will notice them. If not, move the focus with JavaScript.
    If a form has multiple errors, it's helpful to notify the user how many errors there are, but it's not required for accessibility compliance.
    It's best practice to set the focus on the first error, to help users fix errors faster.
    -->
    <h2>Notifications</h2>
    <div id="statusMsg" aria-live="polite"></div>
    <!-- this is equivalent to the above line of code <div id="statusMsg" role="status"></div> -->
      
    <p>
      <label for="fullName">Name</label> 
      <br><span id="hint-name">First and last</span>
      <br><input type="text" id="fullName" 
        autocomplete="name" 
        aria-required="true"
        aria-describedby="hint-name error-name">
      <span id="error-name"></span>
    </p>
      
    <p>
      <label for="email">Email</label> 
      <span id="hint-email">(optional)</span>
      <br><input type="text" id="email" 
        autocomplete="email"
        aria-describedby="hint-email">
      <span id="error-email"></span>
    </p>
      
    <p>
      <label for="phone">Phone</label>
      <br><span id="hint-phone">Format: 999-999-9999</span>
      <br><input type="text" id="phone" 
        autocomplete="phone" 
        aria-required="true"
        aria-describedby="hint-phone error-phone">
      <span id="error-phone"></span>
    </p>
 
    <p>
      <button type="submit" id="form-submit">submit</button> 
      <button type="button" id="form-cancel">cancel</button>
    </p>
      
    <div id="alert" role="alert"></div>
    <!-- this is equivalent to the above line of code <div id="alert" aria-live="assertive"></div>-->
    
    <script>
      
      var formSubmit = document.getElementById("form-submit"),
          formCancel = document.getElementById("form-cancel"),
          statusMsg = document.getElementById("statusMsg"),
          errName = document.getElementById("error-name"),
          errPhone = document.getElementById("error-phone"),
          fullName = document.getElementById("fullName"),
          phone = document.getElementById("phone");
      
      formSubmit.addEventListener("click", showError, false);
      formCancel.addEventListener("click", showAlert);
      
      // show two errors on the page (this function demos error messaging only - it doesn't actually check for errors)
      function showError() {
        statusMsg.innerHTML = "There are two errors on this page. Please fix them and resubmit the form.";
        errName.innerHTML = "&nbsp;<strong>Error</strong>: Name is required";
        errPhone.innerHTML = "&nbsp;<strong>Error</strong>: Phone is required";
        fullName.setAttribute("aria-invalid", "true");
        phone.setAttribute("aria-invalid", "true");
        fullName.focus();
      }
      
      // show alert (this demos the alert role - it doesn't have any other cancellation functionality like clearing form fields)
      function showAlert() {
        var alert = document.getElementById("alert");
        alert.innerHTML = "Your form submission was cancelled."; 
      }
    </script>

    <hr>
    <!-- adapted from 
    https://van11y.net/accessible-carrousel/
    I've replaced the dots that navigate all the slides with captions and the current slide number and total slides. I increased the contrast of the previous and next arrows and added a title overlay. I left the JS minified and didn't touch any of it. The 800px width on the container is to make the carousel navigtion fit the photo size. Assuming your photos are different sizes or you are using a grid, you can change or remove the width.
    -->

    <style>
      .relative { 
        position: relative; 
      }
      .mod--hidden { 
        overflow: hidden; 
      }
      .pb1 { 
        padding-bottom: 1em; 
      }

      .carrousel {
        position: absolute;
        top: 0;
        left: 0;
        color: #f4f9ee;
        background: rgba(45, 49, 50, .7);
        z-index: 100;
        padding: .5em;
        margin: 0;
      }

      .invisible {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
      }

      .img-carrousel__container {
        white-space: nowrap;
      }
      .img-carrousel__control__list {
        display: none;
      }

      .img-carrousel__button-container {
        position: absolute;
      }
      .img-carrousel__button__previous {
        top: 50%;
        margin-top: -18px;
        left: 0;
        margin-left: 35px;
        z-index: 100;
      }
      .img-carrousel__button__next {
        top: 50%;
        margin-top: -18px;
        right: 0;
        margin-right: 35px;
        z-index: 100;
      }
      .img-carrousel__button__button {
        margin: 0;
        padding: .5em .25em .25em;
        background: rgba(244, 249, 238, .7);
        border-radius: 4px;
        border: 0;
        cursor: pointer;
      }
      .img-carrousel__button__button:hover, .img-carrousel__button__button:focus, .img-carrousel__button__button:active {
        color: #fff;
        background: #115d70;
        outline: 2px solid transparent; /* for windows high contrast */
      }
      .img-carrousel__button__button:focus {
          background: rgba(7, 159, 197, .6);
      }
      img[tabindex="-1"]:focus {
        outline: none;
      }

      /* transitions */
      .fade .carrousel__content {
          -webkit-animation: fadein 1s;
          animation:         fadein 1s;
          white-space: normal;
      }
      .fade .carrousel__content[aria-hidden=true] {
          -webkit-animation: fadeout 1s;
          animation:         fadeout 1s;
      }
      .fade .carrousel__content[aria-hidden=true] {
          display: none;
      }

      @-webkit-keyframes fadeout {
          0%   { opacity: 0; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; }
          100% { opacity: 1; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; }
      }
      @keyframes fadeout {
          0%   { opacity: 1; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; }
          100% { opacity: 0; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; }
      }

      @-webkit-keyframes fadein {
          0%   { opacity: 0; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; }
          100% { opacity: 1; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; }
      }
      @keyframes fadein {
          0%   { opacity: 0; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; }
          100% { opacity: 1; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; }
      }
    </style>
    <h2>Carousel</h2>

        <div class="js-carrousel relative" style="width: 800px">
          <h2 class="carrousel">Customer photos</h2>
          <div class="js-carrousel__container mod--hidden"
           data-carrousel-btn-previous-img="http://www.teakboutique.ca/images/customer/previous.png"
           data-carrousel-btn-next-img="http://www.teakboutique.ca/images/customer/next.png"
           data-carrousel-btn-previous-text="Previous photo"
           data-carrousel-btn-next-text="Next photo"
           data-carrousel-prefix-class="img"
           data-carrousel-span-text-class="invisible"
           data-carrousel-transition="fade"
           data-carrousel-existing-hx="img">

            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/hudson-chat.jpg" alt="Light teak deep seating chairs with white cushions surrounding a low round coffee table">
              <p class="caption">Hudson chairs and chat table, photo 1 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/hestercombe-arlington.jpg" alt="Square teak dining table surrounded by chairs with metal frames and teak slats" loading="lazy">
              <p class="caption">Hestercombe and Arlington dining set, photo 2 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/hyde-park.jpg" alt="Weathered grey teak benches with straight lines and a slatted back" loading="lazy">
              <p class="caption">Hyde park benches in a park, photo 3 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/charles.jpg" alt="Teak bench and chairs with gently curved backs and white cushions and a small round folding table" loading="lazy">
              <p class="caption">Charles bench and chairs with white cushions, photo 4 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/hyannis.jpg" alt="Long rectangular teak dining table surrounded by armless folding chairs" loading="lazy">
              <p class="caption">Hyannis dining set in a backyard, photo 5 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/glenora.jpg" alt="Oiled modular teak deep seating with grey cushions and a small round coffee table" loading="lazy">
              <p class="caption">Glenora deep seating on a deck, photo 6 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/kingston-charles.jpg" alt="Light teak oval dining table surrounded by armless and arm chairs with gently curved backs" loading="lazy">
              <p class="caption">Kingston dining table with Charles chair in a woodsy yard, photo 7 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/charles-dining-taft-deepseating.jpg" alt="Oval teak dining table surrounded by armless and arm chairs with gently curved backs and teak love seat with beige cushions" loading="lazy">
              <p class="caption">Charles dining set and Taft deep seating, photo 8 of 9</p>
            </div>
            <div class="js-carrousel__content">
              <img src="http://www.teakboutique.ca/images/customer/luytens.jpg" alt="Light teak bench with arms and a slatted scrolled back" loading="lazy">
              <p class="caption">Luytens bench on a stone patio, photo 9 of 9</p>
            </div>

          </div>
        </div>

    <script>
      /**
       * van11y-accessible-carrousel-aria - ES2015 accessible carrousel system, using ARIA (compatible IE9+ when transpiled)
       * @version v1.3.0
       * @link https://van11y.net/accessible-carrousel/
       * @license undefined : undefined
       */
      "use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){var t="js-carrousel",r="js-carrousel__container",n="js-carrousel__content",o="js-carrousel__control__list",i="js-carrousel__control__list__item",a="js-carrousel__control__list__link",l="carrousel__control__list",u="carrousel__control__list__item",c="carrousel__control__list__link",s="carrousel",d="carrousel__container",_="carrousel__content",b="js-carrousel__button-container",f="carrousel__button-container",p="carrousel__button__previous",y="carrousel__button__next",v="js-carrousel__button__previous",A="js-carrousel__button__next",g="carrousel__button__button",m="carrousel__button__img",C="id_carrousel_content_",P="label_",h="data-carrousel-prefix-class",x="data-carrousel-btn-previous-img",L="data-carrousel-btn-previous-text",k="data-carrousel-btn-next-img",N="data-carrousel-btn-next-text",E="data-carrousel-span-text-class",S="data-carrousel-transition",q="data-carrousel-active-slide",T="data-carrousel-control-element-number",j="data-carrousel-existing-hx",M="data-carrousel-hx",w="data-carrousel-span-text",I="data-carousel-hide-arrows-focus",O="invisible",B="role",H="aria-controls",D="aria-labelledby",K="aria-hidden",F="aria-selected",G="type",U="button",V="alt",R="src",$="class",z="tablist",J="tabpanel",Q="tab",W="presentation",X=function(t){return e.getElementById(t)},Y=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},Z=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},ee=function(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})},te=function(e,t){for(var r=!1,n=e;n&&r===!1;)Z(n,t)===!0?r=!0:n=n.parentNode;return r===!0?n.getAttribute("id"):""},re=function(e,t){for(var r=!1,n=e.parentNode;n&&r===!1;)Z(n,t)===!0?r=!0:n=n.parentNode;return r===!0?n:""},ne=function(e){var t=e.id,r=e.text,n=e.spanClass,o=e.prefixClass+u,l=e.prefixClass+c,s=e.controlsId,d=e.selected,_=d?"0":"-1",b=e.numberElement;return'<li class="'+i+" "+o+'" '+B+'="'+W+'"><a class="'+a+" "+l+'" id="'+t+'" '+B+'="'+Q+'" '+H+'="'+s+'" '+F+'="'+d+'" '+T+'="'+b+'" tabindex="'+_+'"><span class="'+n+'">'+r+"</span></a></li>"},oe=function(e){var t,r,n=e.controlListLink,o=e.panelControled,i=e.carrouselContainer,l=i.parentNode,u=!!e.giveFocus,c=Number(i.getAttribute(q)),s=l.querySelector("."+a+"["+T+'="'+c+'"]'),d=X(s.getAttribute(H));ee(s,(t={},_defineProperty(t,F,"false"),_defineProperty(t,"tabindex","-1"),t)),ee(d,_defineProperty({},K,"true")),ee(n,(r={},_defineProperty(r,F,"true"),_defineProperty(r,"tabindex","0"),r)),ee(o,_defineProperty({},K,"false")),ee(i,_defineProperty({},q,Number(n.getAttribute(T)))),u&&setTimeout(function(){return n.focus()},0)},ie=function(){var r=arguments.length<=0||void 0===arguments[0]?e:arguments[0];return[].slice.call(r.querySelectorAll("."+t))},ae=function(u){var c=arguments.length<=1||void 0===arguments[1]||arguments[1];ie(u).forEach(function(t){var i=Math.random().toString(32).slice(2,12),a=t.querySelector("."+r),u=a.hasAttribute(S)===!0?a.getAttribute(S):"",c=a.hasAttribute(h)===!0?a.getAttribute(h)+"-":"",T=a.hasAttribute(j)===!0?a.getAttribute(j):"",H=a.hasAttribute(M)===!0?a.getAttribute(M):"span",F=a.hasAttribute(w)===!0?a.getAttribute(w)+" ":"",Q=a.hasAttribute(E)===!0?a.getAttribute(E):O,W=a.hasAttribute(I)===!0,X=a.hasAttribute(L)===!0?a.getAttribute(L):"",Z=e.createElement("SPAN");Z.innerHTML=X,Z=Z.textContent;var te=a.hasAttribute(x)===!0?a.getAttribute(x):"",re=a.hasAttribute(N)===!0?a.getAttribute(N):"",oe=e.createElement("SPAN");oe.innerHTML=re,oe=oe.textContent;var ie=a.hasAttribute(k)===!0?a.getAttribute(k):"",ae=a.hasAttribute(q)===!0?Number(a.getAttribute(q)):1;Y(t,c+s),Y(a,c+d),""!==u&&Y(a,u);var le=document.createElement("OL");Y(le,o),Y(le,c+l),ee(le,_defineProperty({},B,z));var ue=[].slice.call(a.querySelectorAll("."+n));if(ue.forEach(function(e,t){var r,n=""+C+i+"_"+t,o=""+P+n,a=ae===t+1,l=void 0,u=void 0;if(Y(e,c+_),Y(e,_),ee(e,(r={},_defineProperty(r,B,J),_defineProperty(r,"id",n),_defineProperty(r,K,a?"false":"true"),_defineProperty(r,D,o),r)),""!==T)l=e.querySelector(T),l&&(ee(l,{tabindex:"-1"}),u=l.textContent);else{u=F+(t+1);var s=document.createElement(H);ee(s,{tabindex:"-1"}),s.innerHTML=u,Y(s,O),s=e.insertBefore(s,e.firstChild)}le.innerHTML+=ne({id:o,text:u,spanClass:Q,prefixClass:c,controlsId:n,selected:a,numberElement:t+1})}),le=t.insertBefore(le,a),""!==X){var ce,se=document.createElement("DIV");Y(se,b),Y(se,c+f),Y(se,c+p);var de=document.createElement("BUTTON");if(ee(de,(ce={},_defineProperty(ce,G,U),_defineProperty(ce,"id",v+"_"+i),_defineProperty(ce,"title",X),ce)),W){var _e;ee(de,(_e={},_defineProperty(_e,K,!0),_defineProperty(_e,"tabindex","-1"),_e))}if(Y(de,v),Y(de,c+g),de=se.appendChild(de),""!==te){var be,fe=document.createElement("IMG");ee(fe,(be={},_defineProperty(be,R,te),_defineProperty(be,V,Z),_defineProperty(be,$,c+m),be)),fe=de.appendChild(fe)}else de.innerHTML=X;se=t.insertBefore(se,a)}if(""!==re){var pe,ye=document.createElement("DIV");Y(ye,b),Y(ye,c+f),Y(ye,c+y);var ve=document.createElement("BUTTON");if(ee(ve,(pe={},_defineProperty(pe,G,U),_defineProperty(pe,"id",A+"_"+i),_defineProperty(pe,"title",re),pe)),W){var Ae;ee(ve,(Ae={},_defineProperty(Ae,K,!0),_defineProperty(Ae,"tabindex","-1"),Ae))}if(Y(ve,A),Y(ve,c+g),ve=ye.appendChild(ve),""!==ie){var ge,me=document.createElement("IMG");ee(me,(ge={},_defineProperty(ge,R,ie),_defineProperty(ge,V,oe),_defineProperty(ge,$,c+m),ge)),me=ve.appendChild(me)}else ve.innerHTML=re;t.appendChild(ye)}ee(a,_defineProperty({},q,ae))}),c&&["click","keydown"].forEach(function(o){e.body.addEventListener(o,function(e){var l=te(e.target,a),u=te(e.target,n),c=te(e.target,v),s=te(e.target,A);if(""!==l&&"click"===o){var d=X(l),_=X(d.getAttribute(H)),b=_.parentNode;oe({controlListLink:d,panelControled:_,carrouselContainer:b})}if(""!==c&&"click"===o){var f=X(c),p=f.parentNode.parentNode,b=p.querySelector("."+r),d=void 0,_=void 0,y=Number(b.getAttribute(q));y>1?(d=p.querySelector("."+a+"["+T+'="'+(y-1)+'"]'),_=X(d.getAttribute(H))):(d=p.querySelector("."+i+":last-child > ."+a),_=X(d.getAttribute(H))),oe({controlListLink:d,panelControled:_,carrouselContainer:b})}if(""!==s&&"click"===o){var g=X(s),p=g.parentNode.parentNode,b=p.querySelector("."+r),y=Number(b.getAttribute(q)),d=p.querySelector("."+a+"["+T+'="'+(y+1)+'"]'),_=void 0;d?_=X(d.getAttribute(H)):(d=p.querySelector("."+a+"["+T+'="1"]'),_=X(d.getAttribute(H))),oe({controlListLink:d,panelControled:_,carrouselContainer:b})}if(""!==l&&"keydown"===o){var m=X(l),p=re(m,t),b=p.querySelector("."+r),d=void 0,_=void 0,y=void 0;if(36===e.keyCode)d=p.querySelector("."+a+"["+T+'="1"]'),_=X(d.getAttribute(H));else if(35===e.keyCode)d=p.querySelector("."+i+":last-child > ."+a),_=X(d.getAttribute(H));else if(37!==e.keyCode&&38!==e.keyCode||e.ctrlKey){if(40!==e.keyCode&&39!==e.keyCode||e.ctrlKey)return;y=Number(b.getAttribute(q)),d=p.querySelector("."+a+"["+T+'="'+(y+1)+'"]'),d?_=X(d.getAttribute(H)):(d=p.querySelector("."+a+"["+T+'="1"]'),_=X(d.getAttribute(H)))}else y=Number(b.getAttribute(q)),y>1?(d=p.querySelector("."+a+"["+T+'="'+(y-1)+'"]'),_=X(d.getAttribute(H))):(d=p.querySelector("."+i+":last-child > ."+a),_=X(d.getAttribute(H)));oe({controlListLink:d,panelControled:_,carrouselContainer:b,giveFocus:!0})}""!==u&&"keydown"===o&&!function(){var t=X(u),r=X(t.getAttribute(D));37!==e.keyCode&&38!==e.keyCode||!e.ctrlKey||setTimeout(function(){return r.focus()},0)}()},!0)})},le=function ue(){ae(),document.removeEventListener("DOMContentLoaded",ue)};document.addEventListener("DOMContentLoaded",le),window.van11yAccessibleCarrouselAria=ae}(document);
    </script>
    
    <hr>
    <!-- adapted from 
    https://www.smashingmagazine.com/2014/09/making-modal-windows-better-for-everyone/
    Demo links:
    https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6793fff0-3ca1-4c05-b383-81aa8c9163e8/accessible.html
    https://codepen.io/scottohara/pen/lIdfv
    Styles included in the <head> because you can't demo a modal without styles.
    You need to move focus into the modal when it opens and keep it there until it is closed.
    -->
    <style>
      /* modal overlay */
      .modal-overlay {
        background:rgba(0,0,0,.8);
        height: 100%;
        width: 100%;
        top: 0;
        left: 0;
        display: flex;
        position: fixed;
        z-index: -1;
      }

      .modal-overlay[aria-hidden="true"] {
        opacity: 0;
        visibility: hidden;
      }

      .modal-overlay[aria-hidden="false"] {
        opacity: 1;
        visibility: visible;
        z-index: 2;
      }

      /* modal content area */
      .modal-content {
        background: #ebebeb;
        margin: auto;
        max-width: 400px;
        padding: 1.5em;
        position: relative;
      }

      /* close modal button */
      .btn-close {
        position: absolute;
        right: .25em;
        top: .25em;
      }
    </style>
    <h2>Modal dialog</h2>

    <p>
      <button type="button" id="modal-open">Sign in modal</button>
    </p>
    <p>
      <button onclick="openDialog()">Regular dialog</button>
    </p>

    </div><!-- #page -->
    
   <div class="modal-overlay" id="modal-window" aria-modal="true"
      aria-hidden="true" role="dialog" aria-labelledby="modal_title">

      <div class="modal-content" id="modal-holder" role="document">

          <h3 id="modal_title">Access your account</h3>
          <form>
            <p>
              <label for="user">Username:</label>
              <input type="text" id="user" />
            </p>
            <p>
              <label for="pass">Password:</label>
              <input type="text" id="pass" />
            </p>
            <button type="submit">Sign in</button>
          </form>

        <button type="button" class="btn-close" id="modal-close" aria-label="close">
          &times;
        </button>

      </div><!-- .modal-content -->

    </div><!-- .modal-overlay -->
    
    <script>
      
      // place modal window as the first child of the #page div
      var m = document.getElementById("modal-window"),
          p = document.getElementById("page");
      p.parentNode.insertBefore(m, p);

      var mOverlay = document.getElementById("modal-window"),
          mOpen    = document.getElementById("modal-open"),
          mClose   = document.getElementById("modal-close"),
          modal    = document.getElementById("modal-holder"),
          firstField = document.getElementById("user"),
          allNodes   = document.querySelectorAll("*"),
          modalOpen  = false,
          lastFocus;

      mOpen.addEventListener("click", modalShow); // sign in button click
      mClose.addEventListener("click", modalClose); // modal close button click
      document.addEventListener("keydown", modalClose); // escape key press
      
      // open the modal
      function modalShow(focusItem) {
        lastFocus = document.activeElement; // save button used to open modal
        mOverlay.setAttribute("aria-hidden", "false");
        modalOpen = true;
        firstField.focus(); // set focus on the first field in the modal    
      }

      // restrict focus to the modal window when it's open
      for (i = 0; i < allNodes.length; i++) {
        allNodes.item(i).addEventListener("focus", focusRestrict);
      }

      function focusRestrict(e) {
        if (modalOpen && !modal.contains(e.target)) {
          e.stopPropagation();
          firstField.focus();
        }
      }
      
      // button click or escape key closes the modal
      function modalClose(e) {
        if (modalOpen && (!e.keyCode || e.keyCode === 27) ) {
          mOverlay.setAttribute("aria-hidden", "true");
          modalOpen = false;
          lastFocus.focus(); // return focus to button used to open modal
        }
      }
      
      // clicking on the overlay closes the modal
      mOverlay.addEventListener("click", function(e) {
        if (e.target == modal.parentNode) {
           modalClose(e);
         }
      }, false);

    </script>
    
    <script>
    // non-modal dialog for comparison
    function openDialog() {
      var person = prompt("Please enter your name:");
    }
    </script>

  </body>
</html>
